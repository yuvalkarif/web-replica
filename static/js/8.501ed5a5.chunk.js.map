{"version":3,"sources":["services/firebase.js","Components/Header/photos/Karifgram.png","Components/Header/Header.styles.js","Components/Header/index.js","Components/NotFoundPage/NotFoundPage.styles.js","Components/NotFoundPage/index.js"],"names":["doesUserNameExist","username","a","firebase","firestore","collection","where","get","result","docs","map","user","data","length","getUserByUserId","userId","item","docId","id","getUserByUsername","getSuggestions","following","limit","results","filter","profile","includes","updateLoggedInUserFollowing","loggedInUserDocId","profileId","isFollowingProfile","doc","update","FieldValue","arrayRemove","arrayUnion","updateFollowedUserFollowers","profileDocId","followers","getPhotos","userFollowedPhotos","photo","Promise","all","userLikedPhoto","likes","photosWithUserDetails","getPostsByUserId","getPhotoByPhotoId","photoId","getProfilePictureByName","displayName","profilePic","getLikedPhoto","getUserWithDocId","Wrapper","styled","div","MiniLogo","img","Search","MiniPic","Navbar","Button","button","Header","useContext","FirebaseContext","UserContext","useState","setProfilePic","search","setSearch","useEffect","uid","getUserPic","to","ROUTES","src","Logo","alt","placeholder","value","onChange","target","style","textDecoration","onClick","auth","signOut","onKeyDown","event","key","height","width","circle","NotFoundPage","document","title"],"mappings":"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","file":"static/js/8.501ed5a5.chunk.js","sourcesContent":["import { firebase, FieldValue } from \"../Lib/firebase\";\n\nexport async function doesUserNameExist(username) {\n  const result = await firebase\n    .firestore()\n    .collection(\"users\")\n    .where(\"username\", \"==\", username)\n    .get();\n\n  return result.docs.map((user) => user.data().length > 0);\n}\n\nexport async function getUserByUserId(userId) {\n  const result = await firebase\n    .firestore()\n    .collection(\"users\")\n    .where(\"userId\", \"==\", userId)\n    .get();\n  const user = result.docs.map((item) => ({\n    ...item.data(),\n    docId: item.id,\n  }));\n  return user;\n}\nexport async function getUserByUsername(username) {\n  const result = await firebase\n    .firestore()\n    .collection(\"users\")\n    .where(\"username\", \"==\", username)\n    .get();\n  const user = result.docs.map((item) => ({\n    ...item.data(),\n    docId: item.id,\n  }));\n  return user;\n}\n\nexport async function getSuggestions(userId, following) {\n  const results = await firebase\n    .firestore()\n    .collection(\"users\")\n    .where(\"userId\", \"!=\", userId)\n    .limit(10)\n    .get();\n\n  return results.docs\n    .map((user) => ({ ...user.data(), docId: user.id }))\n    .filter((profile) => profile.userId && !following.includes(profile.userId));\n}\n\nexport async function updateLoggedInUserFollowing(\n  loggedInUserDocId,\n  profileId,\n  isFollowingProfile\n) {\n  return firebase\n    .firestore()\n    .collection(\"users\")\n    .doc(loggedInUserDocId)\n    .update({\n      following: isFollowingProfile\n        ? FieldValue.arrayRemove(profileId)\n        : FieldValue.arrayUnion(profileId),\n    });\n}\nexport async function updateFollowedUserFollowers(\n  profileDocId,\n  loggedInUserDocId,\n  isFollowingProfile\n) {\n  return firebase\n    .firestore()\n    .collection(\"users\")\n    .doc(profileDocId)\n    .update({\n      followers: isFollowingProfile\n        ? FieldValue.arrayRemove(loggedInUserDocId)\n        : FieldValue.arrayUnion(loggedInUserDocId),\n    });\n}\n\nexport async function getPhotos(userId, following) {\n  const result = await firebase\n    .firestore()\n    .collection(\"photos\")\n    .where(\"userId\", \"in\", following)\n    .get();\n  const userFollowedPhotos = result.docs.map((photo) => ({\n    ...photo.data(),\n    docId: photo.id,\n  }));\n  const photosWithUserDetails = await Promise.all(\n    userFollowedPhotos.map(async (photo) => {\n      let userLikedPhoto = false;\n      if (photo.likes.includes(userId)) {\n        userLikedPhoto = true;\n      }\n      const user = await getUserByUserId(photo.userId);\n      const { username } = user[0];\n      return { username, ...photo, userLikedPhoto };\n    })\n  );\n  return photosWithUserDetails;\n}\n\nexport async function getPostsByUserId(userId) {\n  const result = await firebase\n    .firestore()\n    .collection(\"photos\")\n    .where(\"userId\", \"==\", userId)\n    .get();\n\n  return result.docs.map((photo) => photo.data());\n}\n\nexport async function getPhotoByPhotoId(photoId) {\n  const result = await firebase\n    .firestore()\n    .collection(\"photos\")\n    .where(\"photoId\", \"==\", photoId)\n    .get();\n\n  return result.docs.map((photo) => ({\n    ...photo.data(),\n    docId: photo.id,\n  }));\n}\n\nexport async function getProfilePictureByName(displayName) {\n  const [result] = await getUserByUsername(displayName);\n  return result.profilePic;\n}\n\nexport function getLikedPhoto(photo, userId) {\n  let userLikedPhoto = false;\n  if (photo.likes.includes(userId)) {\n    userLikedPhoto = true;\n  }\n  const newPhoto = { ...photo, userLikedPhoto: userLikedPhoto };\n\n  return newPhoto;\n}\n\nexport async function getUserWithDocId(userId) {\n  const result = await firebase\n    .firestore()\n    .collection(\"users\")\n    .where(\"userId\", \"==\", userId)\n    .get();\n\n  const [user] = result.docs.map((user) => ({\n    ...user.data(),\n    docId: user.id,\n  }));\n\n  return user;\n}\n","export default __webpack_public_path__ + \"static/media/Karifgram.33790cf2.png\";","import styled from \"styled-components\";\n\nexport const Wrapper = styled.div`\n  width: 100%;\n  background-color: white;\n  margin: 0;\n  display: grid;\n  height: 3rem;\n  grid-auto-columns: 1fr;\n  grid-template-columns: 1fr 1fr 1fr;\n  grid-template-rows: 1fr;\n  gap: 0px 0px;\n  border-bottom: 1.5px solid var(--lightColor);\n\n  align-items: center;\n  a {\n    display: flex;\n  }\n`;\nexport const MiniLogo = styled.img`\n  height: 2rem;\n  margin-left: 1rem;\n  margin-top: 0.5rem;\n`;\n\nexport const Search = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0.75rem;\n  input {\n    text-align: center;\n    color: var(--mediumColor);\n    background-color: var(--bgColor);\n    border: 1.5px solid var(--lightColor);\n    border-radius: 5px;\n  }\n`;\nexport const MiniPic = styled.img`\n  height: 2.25rem;\n  border-radius: 100%;\n  margin-right: 0.5rem;\n  :hover {\n    opacity: 80%;\n  }\n`;\n\nexport const Navbar = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n`;\n\nexport const Button = styled.button`\n  background-color: var(--blueColor);\n  color: var(--bgColor);\n  border: none;\n  border-radius: 4px;\n  font: inherit;\n  font-weight: 500;\n  padding: 0.5rem 1rem;\n  margin-right: 1rem;\n  cursor: pointer;\n  text-decoration: none;\n`;\n","import React, { useContext, useState } from \"react\";\nimport {\n  Search,\n  Wrapper,\n  Navbar,\n  MiniPic,\n  MiniLogo,\n  Button,\n} from \"./Header.styles\";\nimport Logo from \"./photos/Karifgram.png\";\nimport { Link } from \"react-router-dom\";\nimport FirebaseContext from \"../../Context/firebase\";\nimport UserContext from \"../../Context/user\";\nimport * as ROUTES from \"../../constants/routes\";\nimport { getUserByUserId } from \"../../services/firebase\";\nimport { useEffect } from \"react/cjs/react.development\";\nimport Skeleton from \"react-loading-skeleton\";\nexport const Header = () => {\n  const { firebase } = useContext(FirebaseContext);\n  const { user } = useContext(UserContext);\n  const [profilePic, setProfilePic] = useState();\n  const [search, setSearch] = useState(``);\n\n  useEffect(() => {\n    async function getUserPic() {\n      const result = await getUserByUserId(user.uid);\n\n      setProfilePic(result[0].profilePic);\n    }\n    if (user?.uid) {\n      getUserPic();\n    }\n  }, [user]);\n\n  return (\n    <Wrapper>\n      <Link to={ROUTES.DASHBOARD}>\n        <MiniLogo src={Logo} alt=\"\" />\n      </Link>\n      <Search>\n        <input\n          placeholder=\"Search\"\n          value={search}\n          onChange={({ target }) => setSearch(target.value)}\n        ></input>\n      </Search>\n      <Navbar>\n        {user ? (\n          <>\n            <Link to={ROUTES.DASHBOARD} style={{ textDecoration: \"none\" }}>\n              <Button\n                onClick={() => {\n                  firebase.auth().signOut();\n                }}\n                onKeyDown={(event) => {\n                  if (event.key === \"Enter\") {\n                    firebase.auth().signOut();\n                  }\n                }}\n              >\n                Sign Out\n              </Button>\n            </Link>\n            <Link to={`/p/${user.displayName}`}>\n              {profilePic ? (\n                <MiniPic src={profilePic}></MiniPic>\n              ) : (\n                <Skeleton height={36} width={36} circle={true} />\n              )}\n            </Link>\n          </>\n        ) : (\n          <>\n            <Link to={ROUTES.LOGIN}>\n              <Button>Login</Button>\n            </Link>\n            <Link to={ROUTES.SIGNUP}>\n              <Button\n                onClick={() => {\n                  firebase.auth().signOut();\n                }}\n                onKeyDown={(event) => {\n                  if (event.key === \"Enter\") {\n                    firebase.auth().signOut();\n                  }\n                }}\n              >\n                Sign Up\n              </Button>\n            </Link>\n          </>\n        )}\n      </Navbar>\n    </Wrapper>\n  );\n};\n\nexport default Header;\n","import styled from \"styled-components\";\n\nexport const Wrapper = styled.div`\n  display: flex;\n  margin: 0 auto;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n\n  margin-top: 2rem;\n\n  padding: 2rem 3rem;\n  font-weight: 500;\n  font-size: 1.5rem;\n\n  color: var(--darkColor);\n`;\n","import React, { useEffect } from \"react\";\nimport { Wrapper } from \"./NotFoundPage.styles\";\nimport Header from \"../Header/index\";\n\nconst NotFoundPage = () => {\n  useEffect(() => {\n    document.title = \"Not Found\";\n  });\n  return (\n    <>\n      <Header />\n      <Wrapper>\n        <div>Sorry, this page isn't available.</div>\n      </Wrapper>\n    </>\n  );\n};\n\nexport default NotFoundPage;\n"],"sourceRoot":""}